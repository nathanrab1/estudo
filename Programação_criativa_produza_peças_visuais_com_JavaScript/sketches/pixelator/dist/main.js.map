{"version":3,"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","_canvasSketch","__esModule","default","cell","radius","shape","loadedImage","manager","canvasWidth","canvasHeight","settings","dimensions","typeCanvas","document","createElement","typeContext","getContext","link","rel","href","head","appendChild","container","className","style","position","top","left","right","zIndex","background","backdropFilter","display","flexWrap","gap","padding","justifyContent","input","type","value","placeholder","flex","button","innerText","shapeLabel","shapeSelect","createSlider","labelText","min","max","onInput","wrapper","label","slider","step","numberInput","addEventListener","parseInt","forEach","optionValue","option","render","val","canvasSizeWrapper","widthLabel","widthInput","heightLabel","heightInput","updateCanvasSize","w","h","isNaN","startSketchWithImage","trim","body","async","url","imageURL","Promise","resolve","reject","img","Image","crossOrigin","onload","onerror","src","unmount","context","width","height","cols","Math","floor","rows","numCells","drawImage","typeData","getImageData","data","fillStyle","fillRect","col","row","x","y","save","translate","beginPath","arc","PI","fill","size","restore","err","alert","console","error","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","objectAssign","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","letter","keys","shouldUseNative","target","source","from","symbols","to","TypeError","toObject","s","arguments","key","browser","commonjsGlobal","performance","now","Date","isPromise_1","obj","then","isDom","window","Node","nodeType","nodeName","getClientAPI","defined","arguments$1","isBrowser","is2DContext","ctx","scale","cache","shim","push","supportsArgumentsClass","toString","supported","object","unsupported","pSlice","Array","slice","deepEqual","actual","expected","opts","getTime","strict","b","isUndefinedOrNull","is_arguments","isBuffer","ka","kb","sort","objEquiv","copy","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","undefined","isArray","toLowerCase","test","maskSlice","masks","_","d","D","m","H","M","L","getTimezoneOffset","W","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","getWeek","N","dow","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","hh","HH","MM","ss","l","round","timeNames","tt","T","TT","Z","match","pop","replace","abs","S","len","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","res","repeatString","str","num","substr","noop","defaultExts","extension","prefix","suffix","supportedEncodings","stream","isStart","filename","resolveFilename","frame","func","client","output","ev","saveDataURL","dataURL","splitIndex","indexOf","base64","byteString","atob","mimeMatch","exec","mime","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","createBlobFromDataURL","blob","saveBlob","visibility","download","URL","createObjectURL","onclick","setTimeout","revokeObjectURL","parentElement","removeChild","removeAttribute","click","opt","file","totalFrames","ch","layerStr","isFinite","totalLayers","layer","filter","Boolean","name","timeStamp","hash","commonTypos","dimension","animated","animating","unit","P5","pixellated","looping","pixelPerInch","allKeys","checkSettings","warn","includes","paperSizes","reduce","dict","preset","item","units","conversions","system","factor","cm","pt","pc","in","ft","anchors","metric","ratio","imperial","convertLength","fromUnit","toUnit","pixelsPerInch","defined$1","precision","roundPixel","toFactor","fromFactor","isToPixel","fromUnitData","toUnitData","anchor","result","decimals","Number","convertDistance$1","unitsFrom","unitsTo","resizeCanvas","props","styleWidth","styleHeight","hasDimensions","checkIfHasDimensions","exporting","scaleToFit","scaleToView","pixelRatio","exportPixelRatio","bleed","devicePixelRatio","basePixelRatio","maxPixelRatio","trimWidth","trimHeight","ref","element","parent","innerWidth","innerHeight","getBoundingClientRect","getParentSize","parentWidth","parentHeight","getDimensionsFromPreset","highest","lowest","orientation","landscape","realWidth","realHeight","aspect","windowAspect","scaleToFitPadding","maxWidth","maxHeight","getCanvasContext_1","canvas","gl","attribs","names","createCanvas","ownsCanvas","newCanvas","createCanvasElement","attributes","pixelated","imageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","SketchManager","_settings","_props","_sketch","_raf","_recordTimeout","_lastRedrawResult","_isP5Resizing","_keyboardShortcuts","handler","enabled","keyCode","altKey","metaKey","ctrlKey","togglePlay","preventDefault","commit","removeEventListener","keyboardShortcuts","this$1","hotkeys","shiftKey","recording","endRecord","run","record","exportFrame","playing","pause","play","_animateHandler","animate","_resizeHandler","resize","sketch","get","this","_computePlayhead","currentTime","duration","_computeFrame","playhead","time","fps","_computeCurrentFrame","_getSizeProps","viewportWidth","viewportHeight","dispose","started","_signalBegin","tick","_cancelTimeouts","cancelAnimationFrame","_lastTime","requestAnimationFrame","stop","deltaTime","exportOpts","_createExportOptions","frameInterval","log","_signalEnd","beginRecord","_wrapContextScale","catch","response","begin","end","wasRecording","sequence","encoding","encodingQuality","dateformat","all","preExport","commitOpts","_doExportFrame","drawResult","concat","hasDataObject","toDataURL","exportCanvas","layerList","curOpt","saveParam","k","savePromise","parts","saveFile","saveResult","savedEvents","eventWithOutput","find","outputName","isClient","some","isStreaming","ofSeq","postExport","cb","_preRender","_postRender","p5","scaleContext","scaleX","scaleY","flush","redraw","submitDrawCall","update","notYetSupported","oldCanvas","oldContext","timeOpts","timeProps","getTimeProps","_setupGLKey","_appendCanvasIfNeeded","draw","oldSizes","newProps","pixelDensity","styleCanvas","newSizes","changed","deepEqual_1","_sizeChanged","frameIntervalMS","deltaTimeMS","hasDuration","isNewFrame","playbackRate","newTime","timeScale","isFinished","isLoopStart","loop","lastFrame","dispatch","mount","detach","clear","clearColor","bufferData","hasTotalFrames","totalFramesFromDuration","durationFromTotalFrames","Infinity","startTime","startFrame","hasStartTime","hasStartFrame","setup","loadAndRun","canvasSketch","newSettings","load","unload","destroy","createSketch","preload","P5Constructor","p5Sketch","isGL","renderer","WEBGL","P2D","noLoop","setAttributes","_renderer","drawingContext","loader","attach","message","CACHE","runtimeCollisions","hotID","isHot","hot","id","isInjecting","previousData","cacheGet","next","oldManager","cachePut","PaperSizes","global","CANVAS_SKETCH_DEFAULT_STORAGE_KEY","location"],"sources":["../../../../../../AppData/Roaming/npm/node_modules/canvas-sketch-cli/node_modules/browser-pack/_prelude.js","../main.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/object-assign/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/right-now/browser.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/is-promise/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/is-dom/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/util.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/repeat-string/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/deep-equal/lib/keys.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/deep-equal/lib/is_arguments.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/deep-equal/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/dateformat/lib/dateformat.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/pad-left/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/save.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/accessibility.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/paper-sizes.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/convert-length/convert-length.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/defined/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/distances.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/core/resizeCanvas.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/node_modules/get-canvas-context/index.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/core/createCanvas.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/core/SketchManager.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/core/keyboardShortcuts.js","../node_modules/canvas-sketch/node_modules/canvas-sketch/lib/canvas-sketch.js","canvas-sketch-cli/injected/storage-key.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import canvasSketch from 'canvas-sketch';\r\n\r\nlet cell = 10;\r\nlet radius = 5;\r\nlet shape = 'circle';\r\nlet loadedImage = null;\r\nlet manager = null;\r\n\r\nlet canvasWidth = 1080;\r\nlet canvasHeight = 1080;\r\n\r\nconst settings = {\r\n  dimensions: [canvasWidth, canvasHeight]\r\n};\r\n\r\nconst typeCanvas = document.createElement('canvas');\r\nconst typeContext = typeCanvas.getContext('2d');\r\n\r\n// Importa o CSS\r\nconst link = document.createElement('link');\r\nlink.rel = 'stylesheet';\r\nlink.href = './style.css';\r\ndocument.head.appendChild(link);\r\n\r\n// Cria o container de interface\r\nconst container = document.createElement('div');\r\ncontainer.className = 'input-container';\r\ncontainer.style.position = 'fixed';\r\ncontainer.style.top = '0';\r\ncontainer.style.left = '0';\r\ncontainer.style.right = '0';\r\ncontainer.style.zIndex = '10';\r\ncontainer.style.background = 'rgba(255, 255, 255, 0.95)';\r\ncontainer.style.backdropFilter = 'blur(8px)';\r\ncontainer.style.display = 'flex';\r\ncontainer.style.flexWrap = 'wrap';\r\ncontainer.style.gap = '10px';\r\ncontainer.style.padding = '10px';\r\ncontainer.style.justifyContent = 'center';\r\n\r\n// Campo de URL da imagem\r\nconst input = document.createElement('input');\r\ninput.type = 'text';\r\ninput.value = 'https://picsum.photos/200/200';\r\ninput.placeholder = 'Cole a URL da imagem aqui...';\r\ninput.className = 'image-input';\r\ninput.style.flex = '1 1 300px';\r\n\r\n// Botão de carregar imagem\r\nconst button = document.createElement('button');\r\nbutton.innerText = 'Carregar imagem';\r\nbutton.className = 'load-button';\r\n\r\ncontainer.appendChild(input);\r\ncontainer.appendChild(button);\r\n\r\n// Dropdown de forma (círculo/quadrado)\r\nconst shapeLabel = document.createElement('label');\r\nshapeLabel.innerText = 'Forma:';\r\nshapeLabel.className = 'dropdown-label';\r\n\r\nconst shapeSelect = document.createElement('select');\r\nshapeSelect.className = 'dropdown-select';\r\n['circle', 'square'].forEach((optionValue) => {\r\n  const option = document.createElement('option');\r\n  option.value = optionValue;\r\n  option.innerText = optionValue === 'circle' ? 'Círculo' : 'Quadrado';\r\n  shapeSelect.appendChild(option);\r\n});\r\nshapeSelect.addEventListener('change', () => {\r\n  shape = shapeSelect.value;\r\n  if (manager) manager.render();\r\n});\r\n\r\ncontainer.appendChild(shapeLabel);\r\ncontainer.appendChild(shapeSelect);\r\n\r\n// Função utilitária para criar slider com input numérico\r\nfunction createSlider(labelText, min, max, value, onInput) {\r\n  const wrapper = document.createElement('div');\r\n  wrapper.className = 'slider-wrapper';\r\n\r\n  const label = document.createElement('label');\r\n  label.innerText = labelText;\r\n  label.className = 'slider-label';\r\n\r\n  const slider = document.createElement('input');\r\n  slider.type = 'range';\r\n  slider.min = min;\r\n  slider.max = max;\r\n  slider.step = 1;\r\n  slider.value = value;\r\n  slider.className = 'slider-input';\r\n\r\n  const numberInput = document.createElement('input');\r\n  numberInput.type = 'number';\r\n  numberInput.min = min;\r\n  numberInput.max = max;\r\n  numberInput.step = 1;\r\n  numberInput.value = value;\r\n  numberInput.className = 'number-input';\r\n\r\n  slider.addEventListener('input', () => {\r\n    numberInput.value = slider.value;\r\n    onInput(parseInt(slider.value));\r\n  });\r\n\r\n  numberInput.addEventListener('input', () => {\r\n    slider.value = numberInput.value;\r\n    onInput(parseInt(numberInput.value));\r\n  });\r\n\r\n  wrapper.appendChild(label);\r\n  wrapper.appendChild(slider);\r\n  wrapper.appendChild(numberInput);\r\n  container.appendChild(wrapper);\r\n}\r\n\r\n// Sliders de cell e radius\r\ncreateSlider('Tamanho da célula:', 4, 50, cell, (val) => {\r\n  cell = val;\r\n  if (manager) manager.render();\r\n});\r\n\r\ncreateSlider('Raio dos círculos:', 1, 50, radius, (val) => {\r\n  radius = val;\r\n  if (manager) manager.render();\r\n});\r\n\r\n// Inputs de largura e altura do canvas\r\nconst canvasSizeWrapper = document.createElement('div');\r\ncanvasSizeWrapper.className = 'slider-wrapper';\r\n\r\nconst widthLabel = document.createElement('label');\r\nwidthLabel.innerText = 'Largura (px):';\r\nwidthLabel.className = 'slider-label';\r\n\r\nconst widthInput = document.createElement('input');\r\nwidthInput.type = 'number';\r\nwidthInput.value = canvasWidth;\r\nwidthInput.min = 100;\r\nwidthInput.max = 4000;\r\nwidthInput.className = 'number-input';\r\n\r\nconst heightLabel = document.createElement('label');\r\nheightLabel.innerText = 'Altura (px):';\r\nheightLabel.className = 'slider-label';\r\n\r\nconst heightInput = document.createElement('input');\r\nheightInput.type = 'number';\r\nheightInput.value = canvasHeight;\r\nheightInput.min = 100;\r\nheightInput.max = 4000;\r\nheightInput.className = 'number-input';\r\n\r\ncanvasSizeWrapper.appendChild(widthLabel);\r\ncanvasSizeWrapper.appendChild(widthInput);\r\ncanvasSizeWrapper.appendChild(heightLabel);\r\ncanvasSizeWrapper.appendChild(heightInput);\r\ncontainer.appendChild(canvasSizeWrapper);\r\n\r\nfunction updateCanvasSize() {\r\n  const w = parseInt(widthInput.value);\r\n  const h = parseInt(heightInput.value);\r\n  if (!isNaN(w) && !isNaN(h)) {\r\n    settings.dimensions = [w, h];\r\n    canvasWidth = w;\r\n    canvasHeight = h;\r\n    if (loadedImage) startSketchWithImage(input.value.trim());\r\n  }\r\n}\r\n\r\nwidthInput.addEventListener('change', updateCanvasSize);\r\nheightInput.addEventListener('change', updateCanvasSize);\r\n\r\ndocument.body.appendChild(container);\r\n\r\n// Função para carregar imagem\r\nconst loadImage = (url) => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.crossOrigin = 'Anonymous';\r\n    img.onload = () => resolve(img);\r\n    img.onerror = () => reject(new Error('Erro ao carregar imagem'));\r\n    img.src = url;\r\n  });\r\n};\r\n\r\n// Função para iniciar o sketch\r\nconst startSketchWithImage = async (imageURL) => {\r\n  loadedImage = await loadImage(imageURL);\r\n\r\n  const sketch = () => {\r\n    return ({ context, width, height }) => {\r\n      if (!loadedImage) return;\r\n\r\n      const cols = Math.floor(width / cell);\r\n      const rows = Math.floor(height / cell);\r\n      const numCells = cols * rows;\r\n\r\n      typeCanvas.width = cols;\r\n      typeCanvas.height = rows;\r\n\r\n      typeContext.drawImage(loadedImage, 0, 0, cols, rows);\r\n      const typeData = typeContext.getImageData(0, 0, cols, rows).data;\r\n\r\n      context.fillStyle = 'white';\r\n      context.fillRect(0, 0, width, height);\r\n\r\n      for (let i = 0; i < numCells; i++) {\r\n        const col = i % cols;\r\n        const row = Math.floor(i / cols);\r\n        const x = col * cell;\r\n        const y = row * cell;\r\n\r\n        const r = typeData[i * 4 + 0];\r\n        const g = typeData[i * 4 + 1];\r\n        const b = typeData[i * 4 + 2];\r\n\r\n        context.fillStyle = `rgb(${r}, ${g}, ${b})`;\r\n\r\n        context.save();\r\n        context.translate(x + cell * 0.5, y + cell * 0.5);\r\n\r\n        if (shape === 'circle') {\r\n          context.beginPath();\r\n          context.arc(0, 0, radius, 0, Math.PI * 2);\r\n          context.fill();\r\n        } else {\r\n          const size = radius * 2;\r\n          context.fillRect(-radius, -radius, size, size);\r\n        }\r\n\r\n        context.restore();\r\n      }\r\n    };\r\n  };\r\n\r\n  // remove canvas antigo antes de criar outro\r\n  if (manager && manager.unmount) {\r\n    manager.unmount();\r\n  }\r\n\r\n  manager = await canvasSketch(sketch, settings);\r\n};\r\n\r\n// Ação do botão\r\nbutton.addEventListener('click', async () => {\r\n  const url = input.value.trim();\r\n  if (!url) {\r\n    alert('Por favor, insira uma URL de imagem válida.');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await startSketchWithImage(url);\r\n  } catch (err) {\r\n    alert('Erro ao carregar imagem.');\r\n    console.error(err);\r\n  }\r\n});\r\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","// TODO: We can remove a huge chunk of bundle size by using a smaller\n// utility module for converting units.\nimport isDOM from \"is-dom\";\n\nexport function getClientAPI() {\n  return typeof window !== \"undefined\" && window[\"canvas-sketch-cli\"];\n}\n\nexport function defined() {\n  for (let i = 0; i < arguments.length; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n  return undefined;\n}\n\nexport function isBrowser() {\n  return typeof document !== \"undefined\";\n}\n\nexport function isWebGLContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.clear === \"function\" &&\n    typeof ctx.clearColor === \"function\" &&\n    typeof ctx.bufferData === \"function\"\n  );\n}\n\nexport function is2DContext(ctx) {\n  return (\n    ctx &&\n    typeof ctx.save === \"function\" &&\n    typeof ctx.scale === \"function\" &&\n    typeof ctx.restore === \"function\"\n  );\n}\n\nexport function isCanvas(element) {\n  return (\n    isDOM(element) &&\n    /canvas/i.test(element.nodeName) &&\n    typeof element.getContext === \"function\"\n  );\n}\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","/*!\n * pad-left <https://github.com/jonschlinkert/pad-left>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar repeat = require('repeat-string');\n\nmodule.exports = function padLeft(str, num, ch) {\n  str = str.toString();\n\n  if (typeof num === 'undefined') {\n    return str;\n  }\n\n  if (ch === 0) {\n    ch = '0';\n  } else if (ch) {\n    ch = ch.toString();\n  } else {\n    ch = ' ';\n  }\n\n  return repeat(ch, num - str.length) + str;\n};\n","import dateformat from 'dateformat';\nimport assign from 'object-assign';\nimport padLeft from 'pad-left';\nimport { getClientAPI } from './util';\n\nconst noop = () => {};\nlet link;\nlet defaultExts = { extension: '', prefix: '', suffix: '' };\n\n// Alternative solution for saving files,\n// a bit slower and does not work in Safari\n// function fetchBlobFromDataURL (dataURL) {\n//   return window.fetch(dataURL).then(res => res.blob());\n// }\n\nconst supportedEncodings = [\n  'image/png',\n  'image/jpeg',\n  'image/webp'\n];\n\nfunction stream (isStart, opts = {}) {\n  return new Promise((resolve, reject) => {\n    opts = assign({}, defaultExts, opts);\n    const filename = resolveFilename(Object.assign({}, opts, {\n      extension: '',\n      frame: undefined\n    }));\n    const func = isStart ? 'streamStart' : 'streamEnd';\n    const client = getClientAPI();\n    if (client && client.output && typeof client[func] === 'function') {\n      return client[func](assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      return resolve({ filename, client: false });\n    }\n  });\n}\n\nexport function streamStart (opts = {}) {\n  return stream(true, opts);\n}\n\nexport function streamEnd (opts = {}) {\n  return stream(false, opts);\n}\n\nexport function exportCanvas (canvas, opt = {}) {\n  const encoding = opt.encoding || 'image/png';\n  if (!supportedEncodings.includes(encoding)) throw new Error(`Invalid canvas encoding ${encoding}`);\n  let extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n  if (extension) extension = `.${extension}`.toLowerCase();\n  return {\n    extension,\n    type: encoding,\n    dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n  };\n}\n\nfunction createBlobFromDataURL (dataURL) {\n  return new Promise((resolve) => {\n    const splitIndex = dataURL.indexOf(',');\n    if (splitIndex === -1) {\n      resolve(new window.Blob());\n      return;\n    }\n    const base64 = dataURL.slice(splitIndex + 1);\n    const byteString = window.atob(base64);\n    const type = dataURL.slice(0, splitIndex);\n    const mimeMatch = /data:([^;]+)/.exec(type);\n    const mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    resolve(new window.Blob([ ab ], { type: mime }));\n  });\n}\n\nexport function saveDataURL (dataURL, opts = {}) {\n  return createBlobFromDataURL(dataURL)\n    .then(blob => saveBlob(blob, opts));\n}\n\nexport function saveBlob (blob, opts = {}) {\n  return new Promise(resolve => {\n    opts = assign({}, defaultExts, opts);\n    const filename = opts.filename;\n\n    const client = getClientAPI();\n    if (client && typeof client.saveBlob === 'function' && client.output) {\n      // native saving using a CLI tool\n      return client.saveBlob(blob, assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      // force download\n      if (!link) {\n        link = document.createElement('a');\n        link.style.visibility = 'hidden';\n        link.target = '_blank';\n      }\n      link.download = filename;\n      link.href = window.URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.onclick = () => {\n        link.onclick = noop;\n        setTimeout(() => {\n          window.URL.revokeObjectURL(blob);\n          if (link.parentElement) link.parentElement.removeChild(link);\n          link.removeAttribute('href');\n          resolve({ filename, client: false });\n        });\n      };\n      link.click();\n    }\n  });\n}\n\nexport function saveFile (data, opts = {}) {\n  const parts = Array.isArray(data) ? data : [ data ];\n  const blob = new window.Blob(parts, { type: opts.type || '' });\n  return saveBlob(blob, opts);\n}\n\nexport function getTimeStamp () {\n  const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  return dateformat(new Date(), dateFormatStr);\n}\n\nexport function getDefaultFile (prefix = '', suffix = '', ext) {\n  // const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  const dateFormatStr = `yyyy-mm-dd 'at' h.MM.ss TT`;\n  return `${prefix}${dateformat(new Date(), dateFormatStr)}${suffix}${ext}`;\n}\n\nexport function resolveFilename (opt = {}) {\n  opt = assign({}, opt);\n\n  // Custom filename function\n  if (typeof opt.file === 'function') {\n    return opt.file(opt);\n  } else if (opt.file) {\n    return opt.file;\n  }\n\n  let frame = null;\n  let extension = '';\n  if (typeof opt.extension === 'string') extension = opt.extension;\n\n  if (typeof opt.frame === 'number') {\n    let totalFrames;\n    if (typeof opt.totalFrames === 'number') {\n      totalFrames = opt.totalFrames;\n    } else {\n      totalFrames = Math.max(10000, opt.frame);\n    }\n    frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n  }\n\n  const layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? `${opt.layer}` : '';\n  if (frame != null) {\n    return [ layerStr, frame ].filter(Boolean).join('-') + extension;\n  } else {\n    const defaultFileName = opt.timeStamp;\n    return [ opt.prefix, opt.name || defaultFileName, layerStr, opt.hash, opt.suffix ].filter(Boolean).join('-') + extension;\n  }\n}\n","// Handle some common typos\nconst commonTypos = {\n  dimension: 'dimensions',\n  animated: 'animate',\n  animating: 'animate',\n  unit: 'units',\n  P5: 'p5',\n  pixellated: 'pixelated',\n  looping: 'loop',\n  pixelPerInch: 'pixels'\n};\n\n// Handle all other typos\nconst allKeys = [\n  'dimensions', 'units', 'pixelsPerInch', 'orientation',\n  'scaleToFit', 'scaleToView', 'bleed', 'pixelRatio',\n  'exportPixelRatio', 'maxPixelRatio', 'scaleContext',\n  'resizeCanvas', 'styleCanvas', 'canvas', 'context', 'attributes',\n  'parent', 'file', 'name', 'prefix', 'suffix', 'animate', 'playing',\n  'loop', 'duration', 'totalFrames', 'fps', 'playbackRate', 'timeScale',\n  'frame', 'time', 'flush', 'pixelated', 'hotkeys', 'p5', 'id',\n  'scaleToFitPadding', 'data', 'params', 'encoding', 'encodingQuality'\n];\n\n// This is fairly opinionated and forces users to use the 'data' parameter\n// if they want to pass along non-setting objects...\nexport const checkSettings = (settings) => {\n  const keys = Object.keys(settings);\n  keys.forEach(key => {\n    if (key in commonTypos) {\n      const actual = commonTypos[key];\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\", did you mean \"${actual}\"?`);\n    } else if (!allKeys.includes(key)) {\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\"`);\n    }\n  });\n};\n","const defaultUnits = 'mm';\n\nconst data = [\n  // Common Paper Sizes\n  // (Mostly North-American based)\n  [ 'postcard', 101.6, 152.4 ],\n  [ 'poster-small', 280, 430 ],\n  [ 'poster', 460, 610 ],\n  [ 'poster-large', 610, 910 ],\n  [ 'business-card', 50.8, 88.9 ],\n\n  // Photographic Print Paper Sizes\n  [ '2r', 64, 89 ],\n  [ '3r', 89, 127 ],\n  [ '4r', 102, 152 ],\n  [ '5r', 127, 178 ], // 5″x7″\n  [ '6r', 152, 203 ], // 6″x8″\n  [ '8r', 203, 254 ], // 8″x10″\n  [ '10r', 254, 305 ], // 10″x12″\n  [ '11r', 279, 356 ], // 11″x14″\n  [ '12r', 305, 381 ],\n\n  // Standard Paper Sizes\n  [ 'a0', 841, 1189 ],\n  [ 'a1', 594, 841 ],\n  [ 'a2', 420, 594 ],\n  [ 'a3', 297, 420 ],\n  [ 'a4', 210, 297 ],\n  [ 'a5', 148, 210 ],\n  [ 'a6', 105, 148 ],\n  [ 'a7', 74, 105 ],\n  [ 'a8', 52, 74 ],\n  [ 'a9', 37, 52 ],\n  [ 'a10', 26, 37 ],\n  [ '2a0', 1189, 1682 ],\n  [ '4a0', 1682, 2378 ],\n  [ 'b0', 1000, 1414 ],\n  [ 'b1', 707, 1000 ],\n  [ 'b1+', 720, 1020 ],\n  [ 'b2', 500, 707 ],\n  [ 'b2+', 520, 720 ],\n  [ 'b3', 353, 500 ],\n  [ 'b4', 250, 353 ],\n  [ 'b5', 176, 250 ],\n  [ 'b6', 125, 176 ],\n  [ 'b7', 88, 125 ],\n  [ 'b8', 62, 88 ],\n  [ 'b9', 44, 62 ],\n  [ 'b10', 31, 44 ],\n  [ 'b11', 22, 32 ],\n  [ 'b12', 16, 22 ],\n  [ 'c0', 917, 1297 ],\n  [ 'c1', 648, 917 ],\n  [ 'c2', 458, 648 ],\n  [ 'c3', 324, 458 ],\n  [ 'c4', 229, 324 ],\n  [ 'c5', 162, 229 ],\n  [ 'c6', 114, 162 ],\n  [ 'c7', 81, 114 ],\n  [ 'c8', 57, 81 ],\n  [ 'c9', 40, 57 ],\n  [ 'c10', 28, 40 ],\n  [ 'c11', 22, 32 ],\n  [ 'c12', 16, 22 ],\n\n  // Use inches for North American sizes,\n  // as it produces less float precision errors\n  [ 'half-letter', 5.5, 8.5, 'in' ],\n  [ 'letter', 8.5, 11, 'in' ],\n  [ 'legal', 8.5, 14, 'in' ],\n  [ 'junior-legal', 5, 8, 'in' ],\n  [ 'ledger', 11, 17, 'in' ],\n  [ 'tabloid', 11, 17, 'in' ],\n  [ 'ansi-a', 8.5, 11.0, 'in' ],\n  [ 'ansi-b', 11.0, 17.0, 'in' ],\n  [ 'ansi-c', 17.0, 22.0, 'in' ],\n  [ 'ansi-d', 22.0, 34.0, 'in' ],\n  [ 'ansi-e', 34.0, 44.0, 'in' ],\n  [ 'arch-a', 9, 12, 'in' ],\n  [ 'arch-b', 12, 18, 'in' ],\n  [ 'arch-c', 18, 24, 'in' ],\n  [ 'arch-d', 24, 36, 'in' ],\n  [ 'arch-e', 36, 48, 'in' ],\n  [ 'arch-e1', 30, 42, 'in' ],\n  [ 'arch-e2', 26, 38, 'in' ],\n  [ 'arch-e3', 27, 39, 'in' ]\n];\n\nexport default data.reduce((dict, preset) => {\n  const item = {\n    units: preset[3] || defaultUnits,\n    dimensions: [ preset[1], preset[2] ]\n  };\n  dict[preset[0]] = item;\n  dict[preset[0].replace(/-/g, ' ')] = item;\n  return dict;\n}, {});\n","var defined = require('defined');\nvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\nvar conversions = {\n  // metric\n  m: {\n    system: 'metric',\n    factor: 1\n  },\n  cm: {\n    system: 'metric',\n    factor: 1 / 100\n  },\n  mm: {\n    system: 'metric',\n    factor: 1 / 1000\n  },\n  // imperial\n  pt: {\n    system: 'imperial',\n    factor: 1 / 72\n  },\n  pc: {\n    system: 'imperial',\n    factor: 1 / 6\n  },\n  in: {\n    system: 'imperial',\n    factor: 1\n  },\n  ft: {\n    system: 'imperial',\n    factor: 12\n  }\n};\n\nconst anchors = {\n  metric: {\n    unit: 'm',\n    ratio: 1 / 0.0254\n  },\n  imperial: {\n    unit: 'in',\n    ratio: 0.0254\n  }\n};\n\nfunction round (value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction convertDistance (value, fromUnit, toUnit, opts) {\n  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n  opts = opts || {};\n  var pixelsPerInch = defined(opts.pixelsPerInch, 96);\n  var precision = opts.precision;\n  var roundPixel = opts.roundPixel !== false;\n\n  fromUnit = fromUnit.toLowerCase();\n  toUnit = toUnit.toLowerCase();\n\n  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n  if (fromUnit === toUnit) {\n    // We don't need to convert from A to B since they are the same already\n    return value;\n  }\n\n  var toFactor = 1;\n  var fromFactor = 1;\n  var isToPixel = false;\n\n  if (fromUnit === 'px') {\n    fromFactor = 1 / pixelsPerInch;\n    fromUnit = 'in';\n  }\n  if (toUnit === 'px') {\n    isToPixel = true;\n    toFactor = pixelsPerInch;\n    toUnit = 'in';\n  }\n\n  var fromUnitData = conversions[fromUnit];\n  var toUnitData = conversions[toUnit];\n\n  // source to anchor inside source's system\n  var anchor = value * fromUnitData.factor * fromFactor;\n\n  // if systems differ, convert one to another\n  if (fromUnitData.system !== toUnitData.system) {\n    // regular 'm' to 'in' and so forth\n    anchor *= anchors[fromUnitData.system].ratio;\n  }\n\n  var result = anchor / toUnitData.factor * toFactor;\n  if (isToPixel && roundPixel) {\n    result = Math.round(result);\n  } else if (typeof precision === 'number' && isFinite(precision)) {\n    result = round(result, precision);\n  }\n  return result;\n}\n\nmodule.exports = convertDistance;\nmodule.exports.units = units;\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","import paperSizes from './paper-sizes';\nimport convertLength from 'convert-length';\n\nexport function getDimensionsFromPreset (dimensions, unitsTo = 'px', pixelsPerInch = 72) {\n  if (typeof dimensions === 'string') {\n    const key = dimensions.toLowerCase();\n    if (!(key in paperSizes)) {\n      throw new Error(`The dimension preset \"${dimensions}\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.`)\n    }\n    const preset = paperSizes[key];\n    return preset.dimensions.map(d => {\n      return convertDistance(d, preset.units, unitsTo, pixelsPerInch);\n    });\n  } else {\n    return dimensions;\n  }\n}\n\nexport function convertDistance (dimension, unitsFrom = 'px', unitsTo = 'px', pixelsPerInch = 72) {\n  return convertLength(dimension, unitsFrom, unitsTo, {\n    pixelsPerInch,\n    precision: 4,\n    roundPixel: true\n  });\n}\n","import { getDimensionsFromPreset, convertDistance } from '../distances';\nimport { isBrowser, defined } from '../util';\n\nfunction checkIfHasDimensions (settings) {\n  if (!settings.dimensions) return false;\n  if (typeof settings.dimensions === 'string') return true;\n  if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n  return false;\n}\n\nfunction getParentSize (props, settings) {\n  // When no { dimension } is passed in node, we default to HTML canvas size\n  if (!isBrowser()) {\n    return [ 300, 150 ];\n  }\n\n  let element = settings.parent || window;\n\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return [ window.innerWidth, window.innerHeight ];\n  } else {\n    const { width, height } = element.getBoundingClientRect();\n    return [ width, height ];\n  }\n}\n\nexport default function resizeCanvas (props, settings) {\n  let width, height;\n  let styleWidth, styleHeight;\n  let canvasWidth, canvasHeight;\n\n  const browser = isBrowser();\n  const dimensions = settings.dimensions;\n  const hasDimensions = checkIfHasDimensions(settings);\n  const exporting = props.exporting;\n  let scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n  let scaleToView = (!exporting && hasDimensions) ? settings.scaleToView : true;\n  // in node, cancel both of these options\n  if (!browser) scaleToFit = scaleToView = false;\n  const units = settings.units;\n  const pixelsPerInch = (typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch)) ? settings.pixelsPerInch : 72;\n  const bleed = defined(settings.bleed, 0);\n\n  const devicePixelRatio = browser ? window.devicePixelRatio : 1;\n  const basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\n  let pixelRatio, exportPixelRatio;\n\n  // If a pixel ratio is specified, we will use it.\n  // Otherwise:\n  //  -> If dimension is specified, use base ratio (i.e. size for export)\n  //  -> If no dimension is specified, use device ratio (i.e. size for screen)\n  if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n    // When { pixelRatio } is specified, it's also used as default exportPixelRatio.\n    pixelRatio = settings.pixelRatio;\n    exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n  } else {\n    if (hasDimensions) {\n      // When a dimension is specified, use the base ratio rather than screen ratio\n      pixelRatio = basePixelRatio;\n      // Default to a pixel ratio of 1 so that you end up with the same dimension\n      // you specified, i.e. [ 500, 500 ] is exported as 500x500 px\n      exportPixelRatio = defined(settings.exportPixelRatio, 1);\n    } else {\n      // No dimension is specified, assume full-screen retina sizing\n      pixelRatio = devicePixelRatio;\n      // Default to screen pixel ratio, so that it's like taking a device screenshot\n      exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n    }\n  }\n\n  // Clamp pixel ratio\n  if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n    pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n  }\n\n  // Handle export pixel ratio\n  if (exporting) {\n    pixelRatio = exportPixelRatio;\n  }\n\n  // parentWidth = typeof parentWidth === 'undefined' ? defaultNodeSize[0] : parentWidth;\n  // parentHeight = typeof parentHeight === 'undefined' ? defaultNodeSize[1] : parentHeight;\n\n  let [ parentWidth, parentHeight ] = getParentSize(props, settings);\n  let trimWidth, trimHeight;\n\n  // You can specify a dimensions in pixels or cm/m/in/etc\n  if (hasDimensions) {\n    const result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n    const highest = Math.max(result[0], result[1]);\n    const lowest = Math.min(result[0], result[1]);\n    if (settings.orientation) {\n      const landscape = settings.orientation === 'landscape';\n      width = landscape ? highest : lowest;\n      height = landscape ? lowest : highest;\n    } else {\n      width = result[0];\n      height = result[1];\n    }\n\n    trimWidth = width;\n    trimHeight = height;\n\n    // Apply bleed which is assumed to be in the same units\n    width += bleed * 2;\n    height += bleed * 2;\n  } else {\n    width = parentWidth;\n    height = parentHeight;\n    trimWidth = width;\n    trimHeight = height;\n  }\n\n  // Real size in pixels after PPI is taken into account\n  let realWidth = width;\n  let realHeight = height;\n  if (hasDimensions && units) {\n    // Convert to digital/pixel units if necessary\n    realWidth = convertDistance(width, units, 'px', pixelsPerInch);\n    realHeight = convertDistance(height, units, 'px', pixelsPerInch);\n  }\n\n  // How big to set the 'view' of the canvas in the browser (i.e. style)\n  styleWidth = Math.round(realWidth);\n  styleHeight = Math.round(realHeight);\n\n  // If we wish to scale the view to the browser window\n  if (scaleToFit && !exporting && hasDimensions) {\n    const aspect = width / height;\n    const windowAspect = parentWidth / parentHeight;\n    const scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n    const maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n    const maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n    if (styleWidth > maxWidth || styleHeight > maxHeight) {\n      if (windowAspect > aspect) {\n        styleHeight = maxHeight;\n        styleWidth = Math.round(styleHeight * aspect);\n      } else {\n        styleWidth = maxWidth;\n        styleHeight = Math.round(styleWidth / aspect);\n      }\n    }\n  }\n\n  canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n  canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\n  const viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n  const viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\n  const scaleX = canvasWidth / width;\n  const scaleY = canvasHeight / height;\n\n  // Assign to current props\n  return {\n    bleed,\n    pixelRatio,\n    width,\n    height,\n    dimensions: [ width, height ],\n    units: units || 'px',\n    scaleX,\n    scaleY,\n    pixelsPerInch,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    trimWidth,\n    trimHeight,\n    styleWidth,\n    styleHeight\n  };\n}\n","module.exports = getCanvasContext\nfunction getCanvasContext (type, opts) {\n  if (typeof type !== 'string') {\n    throw new TypeError('must specify type string')\n  }\n\n  opts = opts || {}\n\n  if (typeof document === 'undefined' && !opts.canvas) {\n    return null // check for Node\n  }\n\n  var canvas = opts.canvas || document.createElement('canvas')\n  if (typeof opts.width === 'number') {\n    canvas.width = opts.width\n  }\n  if (typeof opts.height === 'number') {\n    canvas.height = opts.height\n  }\n\n  var attribs = opts\n  var gl\n  try {\n    var names = [ type ]\n    // prefix GL contexts\n    if (type.indexOf('webgl') === 0) {\n      names.push('experimental-' + type)\n    }\n\n    for (var i = 0; i < names.length; i++) {\n      gl = canvas.getContext(names[i], attribs)\n      if (gl) return gl\n    }\n  } catch (e) {\n    gl = null\n  }\n  return (gl || null) // ensure null on fail\n}\n","import assign from 'object-assign';\nimport getCanvasContext from 'get-canvas-context';\nimport { isBrowser } from '../util';\n\nfunction createCanvasElement () {\n  if (!isBrowser()) {\n    throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n  }\n  return document.createElement('canvas');\n}\n\nexport default function createCanvas (settings = {}) {\n  let context, canvas;\n  let ownsCanvas = false;\n  if (settings.canvas !== false) {\n    // Determine the canvas and context to create\n    context = settings.context;\n    if (!context || typeof context === 'string') {\n      let newCanvas = settings.canvas;\n      if (!newCanvas) {\n        newCanvas = createCanvasElement();\n        ownsCanvas = true;\n      }\n      const type = context || '2d';\n      if (typeof newCanvas.getContext !== 'function') {\n        throw new Error(`The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?`);\n      }\n      context = getCanvasContext(type, assign({}, settings.attributes, { canvas: newCanvas }));\n      if (!context) {\n        throw new Error(`Failed at canvas.getContext('${type}') - the browser may not support this context, or a different context may already be in use with this canvas.`);\n      }\n    }\n\n    canvas = context.canvas;\n    // Ensure context matches user's canvas expectations\n    if (settings.canvas && canvas !== settings.canvas) {\n      throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n    }\n\n    // Apply pixelation to canvas if necessary, this is mostly a convenience utility\n    if (settings.pixelated) {\n      context.imageSmoothingEnabled = false;\n      context.mozImageSmoothingEnabled = false;\n      context.oImageSmoothingEnabled = false;\n      context.webkitImageSmoothingEnabled = false;\n      context.msImageSmoothingEnabled = false;\n      canvas.style['image-rendering'] = 'pixelated';\n    }\n  }\n  return { canvas, context, ownsCanvas };\n}\n","import assign from \"object-assign\";\nimport rightNow from \"right-now\";\nimport isPromise from \"is-promise\";\nimport {\n  isBrowser,\n  defined,\n  isWebGLContext,\n  is2DContext,\n  isCanvas,\n  getClientAPI,\n} from \"../util\";\nimport deepEqual from \"deep-equal\";\nimport {\n  resolveFilename,\n  saveFile,\n  saveDataURL,\n  getTimeStamp,\n  exportCanvas,\n  streamStart,\n  streamEnd,\n} from \"../save\";\nimport { checkSettings } from \"../accessibility\";\n\nimport keyboardShortcuts from \"./keyboardShortcuts\";\nimport resizeCanvas from \"./resizeCanvas\";\nimport createCanvas from \"./createCanvas\";\n\nclass SketchManager {\n  constructor() {\n    this._settings = {};\n    this._props = {};\n    this._sketch = undefined;\n    this._raf = null;\n    this._recordTimeout = null;\n\n    // Some hacky things required to get around p5.js structure\n    this._lastRedrawResult = undefined;\n    this._isP5Resizing = false;\n\n    this._keyboardShortcuts = keyboardShortcuts({\n      enabled: () => this.settings.hotkeys !== false,\n      save: (ev) => {\n        if (ev.shiftKey) {\n          if (this.props.recording) {\n            this.endRecord();\n            this.run();\n          } else this.record();\n        } else if (!this.props.recording) {\n          this.exportFrame();\n        }\n      },\n      togglePlay: () => {\n        if (this.props.playing) this.pause();\n        else this.play();\n      },\n      commit: (ev) => {\n        this.exportFrame({ commit: true });\n      },\n    });\n\n    this._animateHandler = () => this.animate();\n\n    this._resizeHandler = () => {\n      const changed = this.resize();\n      // Only re-render when size actually changes\n      if (changed) {\n        this.render();\n      }\n    };\n  }\n\n  get sketch() {\n    return this._sketch;\n  }\n\n  get settings() {\n    return this._settings;\n  }\n\n  get props() {\n    return this._props;\n  }\n\n  _computePlayhead(currentTime, duration) {\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    return hasDuration ? currentTime / duration : 0;\n  }\n\n  _computeFrame(playhead, time, totalFrames, fps) {\n    return isFinite(totalFrames) && totalFrames > 1\n      ? Math.floor(playhead * (totalFrames - 1))\n      : Math.floor(fps * time);\n  }\n\n  _computeCurrentFrame() {\n    return this._computeFrame(\n      this.props.playhead,\n      this.props.time,\n      this.props.totalFrames,\n      this.props.fps\n    );\n  }\n\n  _getSizeProps() {\n    const props = this.props;\n    return {\n      width: props.width,\n      height: props.height,\n      pixelRatio: props.pixelRatio,\n      canvasWidth: props.canvasWidth,\n      canvasHeight: props.canvasHeight,\n      viewportWidth: props.viewportWidth,\n      viewportHeight: props.viewportHeight,\n    };\n  }\n\n  run() {\n    if (!this.sketch)\n      throw new Error(\n        \"should wait until sketch is loaded before trying to play()\"\n      );\n\n    // Start an animation frame loop if necessary\n    if (this.settings.playing !== false) {\n      this.play();\n    }\n\n    // Let's let this warning hang around for a few versions...\n    if (typeof this.sketch.dispose === \"function\") {\n      console.warn(\n        \"In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()\"\n      );\n    }\n\n    // In case we aren't playing or animated, make sure we still trigger begin message...\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Render an initial frame\n    this.tick();\n    this.render();\n    return this;\n  }\n\n  _cancelTimeouts() {\n    if (\n      this._raf != null &&\n      typeof window !== \"undefined\" &&\n      typeof window.cancelAnimationFrame === \"function\"\n    ) {\n      window.cancelAnimationFrame(this._raf);\n      this._raf = null;\n    }\n    if (this._recordTimeout != null) {\n      clearTimeout(this._recordTimeout);\n      this._recordTimeout = null;\n    }\n  }\n\n  play() {\n    let animate = this.settings.animate;\n    if (\"animation\" in this.settings) {\n      animate = true;\n      console.warn(\n        \"[canvas-sketch] { animation } has been renamed to { animate }\"\n      );\n    }\n    if (!animate) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported\"\n      );\n      return;\n    }\n    if (this.props.playing) return;\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // console.log('play', this.props.time)\n\n    // Start a render loop\n    this.props.playing = true;\n    this._cancelTimeouts();\n    this._lastTime = rightNow();\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n  }\n\n  pause() {\n    if (this.props.recording) this.endRecord();\n    this.props.playing = false;\n\n    this._cancelTimeouts();\n  }\n\n  togglePlay() {\n    if (this.props.playing) this.pause();\n    else this.play();\n  }\n\n  // Stop and reset to frame zero\n  stop() {\n    this.pause();\n    this.props.frame = 0;\n    this.props.playhead = 0;\n    this.props.time = 0;\n    this.props.deltaTime = 0;\n    this.props.started = false;\n    this.render();\n  }\n\n  record() {\n    if (this.props.recording) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Recording from Node.js is not yet supported\"\n      );\n      return;\n    }\n\n    this.stop();\n    this.props.playing = true;\n    this.props.recording = true;\n\n    const exportOpts = this._createExportOptions({ sequence: true });\n\n    const frameInterval = 1 / this.props.fps;\n    // Render each frame in the sequence\n    this._cancelTimeouts();\n    const tick = () => {\n      if (!this.props.recording) return Promise.resolve();\n      this.props.deltaTime = frameInterval;\n      this.tick();\n      return this.exportFrame(exportOpts).then(() => {\n        if (!this.props.recording) return; // was cancelled before\n        this.props.deltaTime = 0;\n        this.props.frame++;\n        if (this.props.frame < this.props.totalFrames) {\n          this.props.time += frameInterval;\n          this.props.playhead = this._computePlayhead(\n            this.props.time,\n            this.props.duration\n          );\n          this._recordTimeout = setTimeout(tick, 0);\n        } else {\n          console.log(\"Finished recording\");\n          this._signalEnd();\n          this.endRecord();\n          this.stop();\n          this.run();\n        }\n      });\n    };\n\n    // Trigger a start event before we begin recording\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Trigger 'begin record' event\n    if (this.sketch && typeof this.sketch.beginRecord === \"function\") {\n      this._wrapContextScale((props) => this.sketch.beginRecord(props));\n    }\n\n    // Initiate a streaming start if necessary\n    streamStart(exportOpts)\n      .catch((err) => {\n        console.error(err);\n      })\n      .then((response) => {\n        this._raf = window.requestAnimationFrame(tick);\n      });\n  }\n\n  _signalBegin() {\n    if (this.sketch && typeof this.sketch.begin === \"function\") {\n      this._wrapContextScale((props) => this.sketch.begin(props));\n    }\n  }\n\n  _signalEnd() {\n    if (this.sketch && typeof this.sketch.end === \"function\") {\n      this._wrapContextScale((props) => this.sketch.end(props));\n    }\n  }\n\n  endRecord() {\n    const wasRecording = this.props.recording;\n\n    this._cancelTimeouts();\n    this.props.recording = false;\n    this.props.deltaTime = 0;\n    this.props.playing = false;\n\n    // tell CLI that stream has finished\n    return streamEnd()\n      .catch((err) => {\n        console.error(err);\n      })\n      .then(() => {\n        // Trigger 'end record' event\n        if (\n          wasRecording &&\n          this.sketch &&\n          typeof this.sketch.endRecord === \"function\"\n        ) {\n          this._wrapContextScale((props) => this.sketch.endRecord(props));\n        }\n      });\n  }\n\n  _createExportOptions(opt = {}) {\n    return {\n      sequence: opt.sequence,\n      save: opt.save,\n      fps: this.props.fps,\n      frame: opt.sequence ? this.props.frame : undefined,\n      file: this.settings.file,\n      name: this.settings.name,\n      prefix: this.settings.prefix,\n      suffix: this.settings.suffix,\n      encoding: this.settings.encoding,\n      encodingQuality: this.settings.encodingQuality,\n      timeStamp: opt.timeStamp || getTimeStamp(),\n      totalFrames: isFinite(this.props.totalFrames)\n        ? Math.max(0, this.props.totalFrames)\n        : 1000,\n    };\n  }\n\n  exportFrame(opt = {}) {\n    if (!this.sketch) return Promise.all([]);\n    if (typeof this.sketch.preExport === \"function\") {\n      this.sketch.preExport();\n    }\n\n    // Options for export function\n    let exportOpts = this._createExportOptions(opt);\n\n    const client = getClientAPI();\n    let p = Promise.resolve();\n    if (client && opt.commit && typeof client.commit === \"function\") {\n      const commitOpts = assign({}, exportOpts);\n      const hash = client.commit(commitOpts);\n      if (isPromise(hash)) p = hash;\n      else p = Promise.resolve(hash);\n    }\n\n    return p\n      .then((hash) => {\n        return this._doExportFrame(\n          assign({}, exportOpts, { hash: hash || \"\" })\n        );\n      })\n      .then((result) => {\n        // Most common usecase is to export a single layer,\n        // so let's optimize the user experience for that.\n        if (result.length === 1) return result[0];\n        else return result;\n      });\n  }\n\n  _doExportFrame(exportOpts = {}) {\n    this._props.exporting = true;\n\n    // Resize to output resolution\n    this.resize();\n\n    // Draw at this output resolution\n    let drawResult = this.render();\n\n    // The self owned canvas (may be undefined...!)\n    const canvas = this.props.canvas;\n\n    // Get list of results from render\n    if (typeof drawResult === \"undefined\") {\n      drawResult = [canvas];\n    }\n    drawResult = [].concat(drawResult).filter(Boolean);\n\n    // Transform the canvas/file descriptors into a consistent format,\n    // and pull out any data URLs from canvas elements\n    drawResult = drawResult.map((result) => {\n      const hasDataObject =\n        typeof result === \"object\" &&\n        result &&\n        (\"data\" in result || \"dataURL\" in result);\n      const data = hasDataObject ? result.data : result;\n      const opts = hasDataObject ? assign({}, result, { data }) : { data };\n      if (isCanvas(data)) {\n        const encoding = opts.encoding || exportOpts.encoding;\n        const encodingQuality = defined(\n          opts.encodingQuality,\n          exportOpts.encodingQuality,\n          0.95\n        );\n        const { dataURL, extension, type } = exportCanvas(data, {\n          encoding,\n          encodingQuality,\n        });\n        return Object.assign(opts, { dataURL, extension, type });\n      } else {\n        return opts;\n      }\n    });\n\n    // Now return to regular rendering mode\n    this._props.exporting = false;\n    this.resize();\n    this.render();\n\n    // And now we can save each result\n    return Promise.all(\n      drawResult.map((result, i, layerList) => {\n        // By default, if rendering multiple layers we will give them indices\n        const curOpt = assign(\n          {\n            extension: \"\",\n            prefix: \"\",\n            suffix: \"\",\n          },\n          exportOpts,\n          result,\n          {\n            layer: i,\n            totalLayers: layerList.length,\n          }\n        );\n\n        // If export is explicitly not saving, make sure nothing saves\n        // Otherwise default to the layer save option, or fallback to true\n        const saveParam = exportOpts.save === false ? false : result.save;\n        curOpt.save = saveParam !== false;\n\n        // Resolve a full filename from all the options\n        curOpt.filename = resolveFilename(curOpt);\n\n        // Clean up some parameters that may be ambiguous to the user\n        delete curOpt.encoding;\n        delete curOpt.encodingQuality;\n\n        // Clean it up further by just removing undefined values\n        for (let k in curOpt) {\n          if (typeof curOpt[k] === \"undefined\") delete curOpt[k];\n        }\n\n        let savePromise = Promise.resolve({});\n        if (curOpt.save) {\n          // Whether to actually save (download) this fragment\n          const data = curOpt.data;\n          if (curOpt.dataURL) {\n            const dataURL = curOpt.dataURL;\n            savePromise = saveDataURL(dataURL, curOpt);\n          } else {\n            savePromise = saveFile(data, curOpt);\n          }\n        }\n        return savePromise.then((saveResult) => {\n          return Object.assign({}, curOpt, saveResult);\n        });\n      })\n    ).then((ev) => {\n      const savedEvents = ev.filter((e) => e.save);\n      if (savedEvents.length > 0) {\n        // Log the saved exports\n        const eventWithOutput = savedEvents.find((e) => e.outputName);\n        const isClient = savedEvents.some((e) => e.client);\n        const isStreaming = savedEvents.some((e) => e.stream);\n        let item;\n        // many files, just log how many were exported\n        if (savedEvents.length > 1) item = savedEvents.length;\n        // in CLI, we know exact path dirname\n        else if (eventWithOutput)\n          item = `${eventWithOutput.outputName}/${savedEvents[0].filename}`;\n        // in browser, we can only know it went to \"browser download folder\"\n        else item = `${savedEvents[0].filename}`;\n        let ofSeq = \"\";\n        if (exportOpts.sequence) {\n          const hasTotalFrames = isFinite(this.props.totalFrames);\n          ofSeq = hasTotalFrames\n            ? ` (frame ${exportOpts.frame + 1} / ${this.props.totalFrames})`\n            : ` (frame ${exportOpts.frame})`;\n        } else if (savedEvents.length > 1) {\n          ofSeq = ` files`;\n        }\n        const client = isClient ? \"canvas-sketch-cli\" : \"canvas-sketch\";\n        const action = isStreaming ? \"Streaming into\" : \"Exported\";\n        console.log(\n          `%c[${client}]%c ${action} %c${item}%c${ofSeq}`,\n          \"color: #8e8e8e;\",\n          \"color: initial;\",\n          \"font-weight: bold;\",\n          \"font-weight: initial;\"\n        );\n      }\n      if (typeof this.sketch.postExport === \"function\") {\n        this.sketch.postExport();\n      }\n      return ev;\n    });\n  }\n\n  _wrapContextScale(cb) {\n    this._preRender();\n    cb(this.props);\n    this._postRender();\n  }\n\n  _preRender() {\n    const props = this.props;\n\n    // Scale context for unit sizing\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.save();\n      if (this.settings.scaleContext !== false) {\n        props.context.scale(props.scaleX, props.scaleY);\n      }\n    } else if (props.p5) {\n      props.p5.scale(\n        props.scaleX / props.pixelRatio,\n        props.scaleY / props.pixelRatio\n      );\n    }\n  }\n\n  _postRender() {\n    const props = this.props;\n\n    if (is2DContext(props.context) && !props.p5) {\n      props.context.restore();\n    }\n\n    // Flush by default, this may be revisited at a later point.\n    // We do this to ensure toDataURL can be called immediately after.\n    // Most likely browsers already handle this, so we may revisit this and\n    // remove it if it improves performance without any usability issues.\n    if (props.gl && this.settings.flush !== false && !props.p5) {\n      props.gl.flush();\n    }\n  }\n\n  tick() {\n    if (this.sketch && typeof this.sketch.tick === \"function\") {\n      this._preRender();\n      this.sketch.tick(this.props);\n      this._postRender();\n    }\n  }\n\n  render() {\n    if (this.props.p5) {\n      this._lastRedrawResult = undefined;\n      this.props.p5.redraw();\n      return this._lastRedrawResult;\n    } else {\n      return this.submitDrawCall();\n    }\n  }\n\n  submitDrawCall() {\n    if (!this.sketch) return;\n\n    const props = this.props;\n    this._preRender();\n\n    let drawResult;\n\n    if (typeof this.sketch === \"function\") {\n      drawResult = this.sketch(props);\n    } else if (typeof this.sketch.render === \"function\") {\n      drawResult = this.sketch.render(props);\n    }\n\n    this._postRender();\n\n    return drawResult;\n  }\n\n  update(opt = {}) {\n    // Currently update() is only focused on resizing,\n    // but later we will support other options like switching\n    // frames and such.\n    const notYetSupported = [\"animate\"];\n\n    Object.keys(opt).forEach((key) => {\n      if (notYetSupported.indexOf(key) >= 0) {\n        throw new Error(\n          `Sorry, the { ${key} } option is not yet supported with update().`\n        );\n      }\n    });\n\n    const oldCanvas = this._settings.canvas;\n    const oldContext = this._settings.context;\n\n    // Merge new options into settings\n    for (let key in opt) {\n      const value = opt[key];\n      if (typeof value !== \"undefined\") {\n        // ignore undefined\n        this._settings[key] = value;\n      }\n    }\n\n    // Merge in time props\n    const timeOpts = Object.assign({}, this._settings, opt);\n    if (\"time\" in opt && \"frame\" in opt)\n      throw new Error(\"You should specify { time } or { frame } but not both\");\n    else if (\"time\" in opt) delete timeOpts.frame;\n    else if (\"frame\" in opt) delete timeOpts.time;\n    if (\"duration\" in opt && \"totalFrames\" in opt)\n      throw new Error(\n        \"You should specify { duration } or { totalFrames } but not both\"\n      );\n    else if (\"duration\" in opt) delete timeOpts.totalFrames;\n    else if (\"totalFrames\" in opt) delete timeOpts.duration;\n\n    // Merge in user data without copying\n    if (\"data\" in opt) this._props.data = opt.data;\n\n    const timeProps = this.getTimeProps(timeOpts);\n    Object.assign(this._props, timeProps);\n\n    // If either canvas or context is changed, we should re-update\n    if (\n      oldCanvas !== this._settings.canvas ||\n      oldContext !== this._settings.context\n    ) {\n      const { canvas, context } = createCanvas(this._settings);\n\n      this.props.canvas = canvas;\n      this.props.context = context;\n\n      // Delete or add a 'gl' prop for convenience\n      this._setupGLKey();\n\n      // Re-mount the new canvas if it has no parent\n      this._appendCanvasIfNeeded();\n    }\n\n    // Special case to support P5.js\n    if (opt.p5 && typeof opt.p5 !== \"function\") {\n      this.props.p5 = opt.p5;\n      this.props.p5.draw = () => {\n        if (this._isP5Resizing) return;\n        this._lastRedrawResult = this.submitDrawCall();\n      };\n    }\n\n    // Update playing state if necessary\n    if (\"playing\" in opt) {\n      if (opt.playing) this.play();\n      else this.pause();\n    }\n\n    checkSettings(this._settings);\n\n    // Draw new frame\n    this.resize();\n    this.render();\n    return this.props;\n  }\n\n  resize() {\n    const oldSizes = this._getSizeProps();\n\n    const settings = this.settings;\n    const props = this.props;\n\n    // Recompute new properties based on current setup\n    const newProps = resizeCanvas(props, settings);\n\n    // Assign to current props\n    Object.assign(this._props, newProps);\n\n    // Now we actually update the canvas width/height and style props\n    const { pixelRatio, canvasWidth, canvasHeight, styleWidth, styleHeight } =\n      this.props;\n\n    // Update canvas settings\n    const canvas = this.props.canvas;\n    if (canvas && settings.resizeCanvas !== false) {\n      if (props.p5) {\n        // P5.js specific edge case\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n          this._isP5Resizing = true;\n          // This causes a re-draw :\\ so we ignore draws in the mean time... sorta hacky\n          props.p5.pixelDensity(pixelRatio);\n          props.p5.resizeCanvas(\n            canvasWidth / pixelRatio,\n            canvasHeight / pixelRatio,\n            false\n          );\n          this._isP5Resizing = false;\n        }\n      } else {\n        // Force canvas size\n        if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n        if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n      }\n      // Update canvas style\n      if (isBrowser() && settings.styleCanvas !== false) {\n        canvas.style.width = `${styleWidth}px`;\n        canvas.style.height = `${styleHeight}px`;\n      }\n    }\n\n    const newSizes = this._getSizeProps();\n    let changed = !deepEqual(oldSizes, newSizes);\n    if (changed) {\n      this._sizeChanged();\n    }\n    return changed;\n  }\n\n  _sizeChanged() {\n    // Send resize event to sketch\n    if (this.sketch && typeof this.sketch.resize === \"function\") {\n      this.sketch.resize(this.props);\n    }\n  }\n\n  animate() {\n    if (!this.props.playing) return;\n    if (!isBrowser()) {\n      console.error(\n        \"[canvas-sketch] WARN: Animation in Node.js is not yet supported\"\n      );\n      return;\n    }\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n\n    let now = rightNow();\n\n    const fps = this.props.fps;\n    const frameIntervalMS = 1000 / fps;\n    let deltaTimeMS = now - this._lastTime;\n\n    const duration = this.props.duration;\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n\n    let isNewFrame = true;\n    const playbackRate = this.settings.playbackRate;\n    if (playbackRate === \"fixed\") {\n      deltaTimeMS = frameIntervalMS;\n    } else if (playbackRate === \"throttle\") {\n      if (deltaTimeMS > frameIntervalMS) {\n        now = now - (deltaTimeMS % frameIntervalMS);\n        this._lastTime = now;\n      } else {\n        isNewFrame = false;\n      }\n    } else {\n      this._lastTime = now;\n    }\n\n    const deltaTime = deltaTimeMS / 1000;\n    let newTime = this.props.time + deltaTime * this.props.timeScale;\n\n    // Handle reverse time scale\n    if (newTime < 0 && hasDuration) {\n      newTime = duration + newTime;\n    }\n\n    // Re-start animation\n    let isFinished = false;\n    let isLoopStart = false;\n\n    const looping = this.settings.loop !== false;\n\n    if (hasDuration && newTime >= duration) {\n      // Re-start animation\n      if (looping) {\n        isNewFrame = true;\n        newTime = newTime % duration;\n        isLoopStart = true;\n      } else {\n        isNewFrame = false;\n        newTime = duration;\n        isFinished = true;\n      }\n\n      this._signalEnd();\n    }\n\n    if (isNewFrame) {\n      this.props.deltaTime = deltaTime;\n      this.props.time = newTime;\n      this.props.playhead = this._computePlayhead(newTime, duration);\n      const lastFrame = this.props.frame;\n      this.props.frame = this._computeCurrentFrame();\n      if (isLoopStart) this._signalBegin();\n      if (lastFrame !== this.props.frame) this.tick();\n      this.render();\n      this.props.deltaTime = 0;\n    }\n\n    if (isFinished) {\n      this.pause();\n    }\n  }\n\n  dispatch(cb) {\n    if (typeof cb !== \"function\")\n      throw new Error(\"must pass function into dispatch()\");\n    cb(this.props);\n    this.render();\n  }\n\n  mount() {\n    this._appendCanvasIfNeeded();\n  }\n\n  unmount() {\n    if (isBrowser()) {\n      window.removeEventListener(\"resize\", this._resizeHandler);\n      this._keyboardShortcuts.detach();\n    }\n    if (this.props.canvas.parentElement) {\n      this.props.canvas.parentElement.removeChild(this.props.canvas);\n    }\n  }\n\n  _appendCanvasIfNeeded() {\n    if (!isBrowser()) return;\n    if (\n      this.settings.parent !== false &&\n      this.props.canvas &&\n      !this.props.canvas.parentElement\n    ) {\n      const defaultParent = this.settings.parent || document.body;\n      defaultParent.appendChild(this.props.canvas);\n    }\n  }\n\n  _setupGLKey() {\n    if (this.props.context) {\n      if (isWebGLContext(this.props.context)) {\n        this._props.gl = this.props.context;\n      } else {\n        delete this._props.gl;\n      }\n    }\n  }\n\n  getTimeProps(settings = {}) {\n    // Get timing data\n    let duration = settings.duration;\n    let totalFrames = settings.totalFrames;\n    const timeScale = defined(settings.timeScale, 1);\n    const fps = defined(settings.fps, 24);\n    const hasDuration = typeof duration === \"number\" && isFinite(duration);\n    const hasTotalFrames =\n      typeof totalFrames === \"number\" && isFinite(totalFrames);\n\n    const totalFramesFromDuration = hasDuration\n      ? Math.floor(fps * duration)\n      : undefined;\n    const durationFromTotalFrames = hasTotalFrames\n      ? totalFrames / fps\n      : undefined;\n    if (\n      hasDuration &&\n      hasTotalFrames &&\n      totalFramesFromDuration !== totalFrames\n    ) {\n      throw new Error(\n        \"You should specify either duration or totalFrames, but not both. Or, they must match exactly.\"\n      );\n    }\n\n    if (\n      typeof settings.dimensions === \"undefined\" &&\n      typeof settings.units !== \"undefined\"\n    ) {\n      console.warn(\n        `You've specified a { units } setting but no { dimension }, so the units will be ignored.`\n      );\n    }\n\n    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n    duration = defined(duration, durationFromTotalFrames, Infinity);\n\n    const startTime = settings.time;\n    const startFrame = settings.frame;\n    const hasStartTime = typeof startTime === \"number\" && isFinite(startTime);\n    const hasStartFrame =\n      typeof startFrame === \"number\" && isFinite(startFrame);\n\n    // start at zero unless user specifies frame or time (but not both mismatched)\n    let time = 0;\n    let frame = 0;\n    let playhead = 0;\n    if (hasStartTime && hasStartFrame) {\n      throw new Error(\n        \"You should specify either start frame or time, but not both.\"\n      );\n    } else if (hasStartTime) {\n      // User specifies time, we infer frames from FPS\n      time = startTime;\n      playhead = this._computePlayhead(time, duration);\n      frame = this._computeFrame(playhead, time, totalFrames, fps);\n    } else if (hasStartFrame) {\n      // User specifies frame number, we infer time from FPS\n      frame = startFrame;\n      time = frame / fps;\n      playhead = this._computePlayhead(time, duration);\n    }\n\n    return {\n      playhead,\n      time,\n      frame,\n      duration,\n      totalFrames,\n      fps,\n      timeScale,\n    };\n  }\n\n  setup(settings = {}) {\n    if (this.sketch)\n      throw new Error(\"Multiple setup() calls not yet supported.\");\n\n    this._settings = Object.assign({}, settings, this._settings);\n\n    checkSettings(this._settings);\n\n    // Get initial canvas & context\n    const { context, canvas } = createCanvas(this._settings);\n\n    const timeProps = this.getTimeProps(this._settings);\n\n    // Initial render state features\n    this._props = {\n      ...timeProps,\n      canvas,\n      context,\n      deltaTime: 0,\n      started: false,\n      exporting: false,\n      playing: false,\n      recording: false,\n      settings: this.settings,\n      data: this.settings.data,\n\n      // Export some specific actions to the sketch\n      render: () => this.render(),\n      togglePlay: () => this.togglePlay(),\n      dispatch: (cb) => this.dispatch(cb),\n      tick: () => this.tick(),\n      resize: () => this.resize(),\n      update: (opt) => this.update(opt),\n      exportFrame: (opt) => this.exportFrame(opt),\n      record: () => this.record(),\n      play: () => this.play(),\n      pause: () => this.pause(),\n      stop: () => this.stop(),\n    };\n\n    // For WebGL sketches, a gl variable reads a bit better\n    this._setupGLKey();\n\n    // Trigger initial resize now so that canvas is already sized\n    // by the time we load the sketch\n    this.resize();\n  }\n\n  loadAndRun(canvasSketch, newSettings) {\n    return this.load(canvasSketch, newSettings).then(() => {\n      this.run();\n      return this;\n    });\n  }\n\n  unload() {\n    this.pause();\n    if (!this.sketch) return;\n    if (typeof this.sketch.unload === \"function\") {\n      this._wrapContextScale((props) => this.sketch.unload(props));\n    }\n    this._sketch = null;\n  }\n\n  destroy() {\n    this.unload();\n    this.unmount();\n  }\n\n  load(createSketch, newSettings) {\n    // User didn't specify a function\n    if (typeof createSketch !== \"function\") {\n      throw new Error(\n        \"The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)\"\n      );\n    }\n\n    if (this.sketch) {\n      this.unload();\n    }\n\n    if (typeof newSettings !== \"undefined\") {\n      this.update(newSettings);\n    }\n\n    // This is a bit of a tricky case; we set up the auto-scaling here\n    // in case the user decides to render anything to the context *before* the\n    // render() function... However, users should instead use begin() function for that.\n    this._preRender();\n\n    let preload = Promise.resolve();\n\n    // Because of P5.js's unusual structure, we have to do a bit of\n    // library-specific changes to support it properly.\n    if (this.settings.p5) {\n      if (!isBrowser()) {\n        throw new Error(\n          \"[canvas-sketch] ERROR: Using p5.js in Node.js is not supported\"\n        );\n      }\n      preload = new Promise((resolve) => {\n        let P5Constructor = this.settings.p5;\n        let preload;\n        if (P5Constructor.p5) {\n          preload = P5Constructor.preload;\n          P5Constructor = P5Constructor.p5;\n        }\n\n        // The sketch setup; disable loop, set sizing, etc.\n        const p5Sketch = (p5) => {\n          // Hook in preload if necessary\n          if (preload) p5.preload = () => preload(p5);\n          p5.setup = () => {\n            const props = this.props;\n            const isGL = this.settings.context === \"webgl\";\n            const renderer = isGL ? p5.WEBGL : p5.P2D;\n            p5.noLoop();\n            p5.pixelDensity(props.pixelRatio);\n            p5.createCanvas(\n              props.viewportWidth,\n              props.viewportHeight,\n              renderer\n            );\n            if (isGL && this.settings.attributes) {\n              p5.setAttributes(this.settings.attributes);\n            }\n\n            this.update({\n              p5,\n              canvas: p5.canvas,\n              context: p5._renderer.drawingContext,\n            });\n            resolve();\n          };\n        };\n\n        // Support global and instance P5.js modes\n        if (typeof P5Constructor === \"function\") {\n          new P5Constructor(p5Sketch);\n        } else {\n          if (typeof window.createCanvas !== \"function\") {\n            throw new Error(\n              \"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\"\n            );\n          }\n          p5Sketch(window);\n        }\n      });\n    }\n\n    return preload\n      .then(() => {\n        // Load the user's sketch\n        let loader = createSketch(this.props);\n        if (!isPromise(loader)) {\n          loader = Promise.resolve(loader);\n        }\n        return loader;\n      })\n      .then((sketch) => {\n        if (!sketch) sketch = {};\n        this._sketch = sketch;\n\n        // Once the sketch is loaded we can add the events\n        if (isBrowser()) {\n          this._keyboardShortcuts.attach();\n          window.addEventListener(\"resize\", this._resizeHandler);\n        }\n\n        this._postRender();\n\n        // The initial resize() in the constructor will not have\n        // triggered a resize() event on the sketch, since it was before\n        // the sketch was loaded. So we send the signal here, allowing\n        // users to react to the initial size before first render.\n        this._sizeChanged();\n        return this;\n      })\n      .catch((err) => {\n        console.warn(\n          \"Could not start sketch, the async loading function rejected with an error:\\n    Error: \" +\n            err.message\n        );\n        throw err;\n      });\n  }\n}\n\nexport default SketchManager;\n","import { getClientAPI } from '../util';\n\nexport default function (opt = {}) {\n  const handler = ev => {\n    if (!opt.enabled()) return;\n\n    const client = getClientAPI();\n    if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + S\n      ev.preventDefault();\n      opt.save(ev);\n    } else if (ev.keyCode === 32) {\n      // Space\n      // TODO: what to do with this? keep it, or remove it?\n      opt.togglePlay(ev);\n    } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + K, only when canvas-sketch-cli is used\n      ev.preventDefault();\n      opt.commit(ev);\n    }\n  };\n\n  const attach = () => {\n    window.addEventListener('keydown', handler);\n  };\n\n  const detach = () => {\n    window.removeEventListener('keydown', handler);\n  };\n\n  return {\n    attach,\n    detach\n  };\n}\n","import SketchManager from './core/SketchManager';\nimport PaperSizes from './paper-sizes';\nimport { getClientAPI, defined } from './util';\n\nconst CACHE = 'hot-id-cache';\nconst runtimeCollisions = [];\n\nfunction isHotReload () {\n  const client = getClientAPI();\n  return client && client.hot;\n}\n\nfunction cacheGet (id) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  return client[CACHE][id];\n}\n\nfunction cachePut (id, data) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  client[CACHE][id] = data;\n}\n\nfunction getTimeProp (oldManager, newSettings) {\n  // Static sketches ignore the time persistency\n  return newSettings.animate ? { time: oldManager.props.time } : undefined;\n}\n\nfunction canvasSketch (sketch, settings = {}) {\n  if (settings.p5) {\n    if (settings.canvas || (settings.context && typeof settings.context !== 'string')) {\n      throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string`);\n    }\n\n    // Do not create a canvas on startup, since P5.js does that for us\n    const context = typeof settings.context === 'string' ? settings.context : false;\n    settings = Object.assign({}, settings, { canvas: false, context });\n  }\n\n  const isHot = isHotReload();\n  let hotID;\n  if (isHot) {\n    // Use a magic name by default, force user to define each sketch if they\n    // require more than one in an application. Open to other ideas on how to tackle\n    // this as well...\n    hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n  }\n  let isInjecting = isHot && typeof hotID === 'string';\n\n  if (isInjecting && runtimeCollisions.includes(hotID)) {\n    console.warn(`Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. `, hotID);\n    isInjecting = false;\n  }\n\n  let preload = Promise.resolve();\n\n  if (isInjecting) {\n    // Mark this as already spotted in this runtime instance\n    runtimeCollisions.push(hotID);\n\n    const previousData = cacheGet(hotID);\n    if (previousData) {\n      const next = () => {\n        // Grab new props from old sketch instance\n        const newProps = getTimeProp(previousData.manager, settings);\n        // Destroy the old instance\n        previousData.manager.destroy();\n        // Pass along new props\n        return newProps;\n      };\n\n      // Move along the next data...\n      preload = previousData.load.then(next).catch(next);\n    }\n  }\n\n  return preload.then(newProps => {\n    const manager = new SketchManager();\n    let result;\n    if (sketch) {\n      // Merge with incoming data\n      settings = Object.assign({}, settings, newProps);\n\n      // Apply settings and create a canvas\n      manager.setup(settings);\n\n      // Mount to DOM\n      manager.mount();\n\n      // load the sketch first\n      result = manager.loadAndRun(sketch);\n    } else {\n      result = Promise.resolve(manager);\n    }\n    if (isInjecting) {\n      cachePut(hotID, { load: result, manager });\n    }\n    return result;\n  });\n}\n\n// TODO: Figure out a nice way to export things.\ncanvasSketch.canvasSketch = canvasSketch;\ncanvasSketch.PaperSizes = PaperSizes;\n\nexport default canvasSketch;\n","\nglobal.CANVAS_SKETCH_DEFAULT_STORAGE_KEY = window.location.href;\n"],"mappings":"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","ignoreList":[]}